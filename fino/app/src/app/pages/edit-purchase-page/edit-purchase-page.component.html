<h1>Edit Purchase</h1>

<ng-container *ngIf="purchase; else wait">
<mat-tab-group [selectedIndex]="tabBehavior.tabIndex" (selectedIndexChange)="tabBehavior.tabIndexChange($event)" class="tab-group" dynamicHeight>
  <mat-tab label="Details">
    <app-purchase-editor-edit [purchase]="purchase"
                              (purchaseUpdated)="onPurchaseUpdated($event)"
                              (purchaseDeleted)="onPurchaseDeleted()"/>
  </mat-tab>
  <mat-tab label="Receipt">
    <app-receipt-editor [receiptName]="receiptBehavior.receiptName" [purchaseId]="purchase.uid" (receiptNameChange)="onReceiptNameChange($event)"/>
  </mat-tab>
</mat-tab-group>

<div class="action-button-row">
  <button mat-flat-button (click)="cancel()">Cancel</button>
  <button mat-flat-button color="primary"
          (click)="submitPurchase()"
          [disabled]="!isFormValid">
    Save
  </button>
</div>
</ng-container>

<ng-template #wait>Loading. Please stand by...</ng-template>
