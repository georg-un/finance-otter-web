<h1>Edit Purchase</h1>

<ng-container *ngIf="purchase; else wait">
<mat-tab-group [selectedIndex]="tabBehavior.tabIndex" (selectedIndexChange)="tabBehavior.tabIndexChange($event)" class="tab-group" dynamicHeight>
  <mat-tab label="Details">
    <app-purchase-editor-edit [purchase]="purchase"
                              [receiptName]="receiptBehavior.receiptSrc"
                              (updatePurchase)="onUpdatePurchase($event)"
                              (deletePurchase)="onDeletePurchase()"/>
  </mat-tab>
  <mat-tab label="Receipt">
    <app-receipt-editor [receiptSrc]="receiptBehavior.receiptSrc" (imageCapture)="onNewReceipt($event)" (deleteReceipt)="onDeleteReceipt()"/>
  </mat-tab>
</mat-tab-group>

<div class="action-button-row">
  <button mat-flat-button (click)="cancel()">Cancel</button>
  <button mat-flat-button color="primary"
          (click)="submitPurchaseUpdate()"
          [disabled]="!isFormValid">
    Save
  </button>
</div>
</ng-container>

<ng-template #wait>Loading. Please stand by...</ng-template>
